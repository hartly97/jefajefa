<h1><%= @cemetery.name %></h1>

<%= render "shared/citations", citable: @cemetery, heading: "Cemetery Citations" %>


<p class="mt-3">
  <%= link_to "Edit", [:edit, @cemetery] %> |
  <%= link_to "Back", url_for(controller: controller_name, action: :index) %>
</p>
<h2>Burials <small class="text-muted">(<%= @burials_count %>)</small></h2>

<%= form_with url: cemetery_path(@cemetery), method: :get, local: true,
              class: "row g-2 align-items-end mb-2" do %>
  <div class="col-md-6">
    <%= label_tag :q, "Search burials" %>
    <%= text_field_tag :q, params[:q], class: "form-control",
                       placeholder: "Search by nameâ€¦" %>
  </div>
  <div class="col-md-2">
    <%= submit_tag "Search", class: "btn btn-primary w-100" %>
  </div>
  <% if params[:q].present? %>
    <div class="col-md-2">
      <%= link_to "Clear", cemetery_path(@cemetery), class: "btn btn-link w-100" %>
    </div>
  <% end %>
<% end %>

<% if @burials.any? %>
  <ul>
    <% @burials.each do |s| %>
      <li><%= link_to(s.respond_to?(:display_name) ? s.display_name :
                      [s.first_name, s.last_name].compact.join(" "),
                      s) %></li>
    <% end %>
  </ul>
  <% end %>

<%#= render "cemeteries/burials",
           cemetery: @cemetery,
           soldiers: @burials,
           total_count: @burials_count %>
