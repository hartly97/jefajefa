<h1><%= @cemetery.name %></h1>

<%= render "shared/citations", citable: @cemetery, heading: "Cemetery Citations" %>

<p class="mt-3">
  <%= link_to "Edit", [:edit, @cemetery] %> |
  <%= link_to "Back", url_for(controller: controller_name, action: :index) %> |
  <%= link_to "Add burial", new_cemetery_burial_path(@cemetery),
              class: "btn btn-sm btn-outline-primary" %>
</p>

<%= form_with url: cemetery_path(@cemetery), method: :get, local: true,
              class: "row g-2 align-items-end mb-3" do %>
  <div class="col-md-6">
    <%= label_tag :q, "Search burials" %>
    <%= text_field_tag :q, params[:q], class: "form-control",
                       placeholder: "Search by nameâ€¦" %>
  </div>
  <div class="col-md-2">
    <%= submit_tag "Search", class: "btn btn-primary w-100" %>
  </div>
  <% if params[:q].present? %>
    <div class="col-md-2">
      <%= link_to "Clear", cemetery_path(@cemetery), class: "btn btn-link w-100" %>
    </div>
  <% end %>
<% end %>

<hr class="my-4">

<h2>Soldiers buried here
  <small class="text-muted">(<%= @soldier_burials_count %>)</small>
</h2>
<%= render "cemeteries/burials_table",
      cemetery: @cemetery,
      burials:  @soldier_burials,
      total_count: @soldier_burials_count %>

<h2 class="mt-4">Other burials
  <small class="text-muted">(<%= @burials_count %>)</small>
</h2>
<%= render "cemeteries/burials_table",
      cemetery: @cemetery,
      burials:  @burials,
      total_count: @burials_count %>
