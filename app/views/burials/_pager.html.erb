<!-- app/views/burials/_pager.html.erb -->
<% curr_page = (@page || params.fetch(:page, 1)).to_i %>
<% per       = (@per_page || params.fetch(:per_page, 50)).to_i %>

<% base_params = {
  q: params[:q].presence,
  cemetery_id: params[:cemetery_id].presence,
  per_page: per
}.compact %>

<div class="d-flex justify-content-between align-items-center my-3">
  <div>
    <% if curr_page > 1 %>
      <%= link_to "← Prev", burials_path(base_params.merge(page: curr_page - 1)), class: "btn btn-outline-secondary" %>
    <% else %>
      <button class="btn btn-outline-secondary" disabled>← Prev</button>
    <% end %>
  </div>

  <div class="text-muted">
    Page <%= curr_page %>
    <% if defined?(@total_count) && @total_count %>
      &middot; <%= @total_count %> total
    <% end %>
  </div>

  <div>
    <% if @has_next %>
      <%= link_to "Next →", burials_path(base_params.merge(page: curr_page + 1)), class: "btn btn-outline-secondary" %>
    <% else %>
      <button class="btn btn-outline-secondary" disabled>Next →</button>
    <% end %>
  </div>
</div>
