
# <h3>Wars</h3>
# <ul>
#   <% Array(@soldier.try(:war_categories)).sort_by { |w| w.name.to_s }.each do |war| %>
#     <li><%= link_to war.name, category_path(war) %></li>
#   <% end %>
# </ul>


# <h3>Battles</h3>
# <ul>
#   <% Array(@soldier.try(:battle_categories)).sort_by { |b| b.name.to_s }.each do |b| %>
#     <li><%= link_to b.name, category_path(b) %></li>
#   <% end %>
# </ul>

#   <% @soldier.battle_categories.each do |cat| %>
#     <li><%= link_to cat.name, category_path(cat) %></li>
#   <% end %>
# </ul>


# <h3>Medals</h3>
# <% if @soldier.medals.exists? %>
#   <ul>
#     <% @soldier.medals.order(:name).each do |m| %>
#       <li><%= link_to m.name, m %></li>
#     <% end %>
#   </ul>
# <% else %>
#   <p>No medals recorded.</p>
# <% end %>

# <h3>Awards</h3>
# <% if @soldier.awards.exists? %>
#   <ul>
#     <% @soldier.awards.order(:year, :id).each do |aw| %>
#       <li>
#         <strong><%= aw.name.presence || "(Unnamed award)" %></strong>
#         <%= " (#{aw.year})" if aw.year.present? %>
#         <%= " — #{aw.country}" if aw.country.present? %>
#         <%= " — #{aw.note}"    if aw.note.present? %>
#       </li>
#     <% end %>
#   </ul>
# <% else %>
#   <p><em>No awards recorded.</em></p>
# <% end %>
# <%= render "shared/citations_grouped", citable: @soldier %>

# <h3>Cemetery</h3>
# <p>
#   <%= @soldier.cemetery ? link_to(@soldier.cemetery.name, @soldier.cemetery) : content_tag(:em, "Not recorded") %>
# </p>

<%# app/views/soldiers/show.html.erb - cleaned sections %>

<% war_cats    = Array(@soldier&.war_categories).compact.sort_by { |w| w.name.to_s } %>
<% battle_cats = Array(@soldier&.battle_categories).compact.sort_by { |b| b.name.to_s } %>

<% if war_cats.any? %>
  <h3>Wars</h3>
  <ul>
    <% war_cats.each do |war| %>
      <li><%= link_to war.name, category_path(war) %></li>
    <% end %>
  </ul>
<% end %>

<% if battle_cats.any? %>
  <h3>Battles</h3>
  <ul>
    <% battle_cats.each do |b| %>
      <li><%= link_to b.name, category_path(b) %></li>
    <% end %>
  </ul>
<% end %>

<h3>Medals</h3>
<% if @soldier.medals.exists? %>
  <ul>
    <% @soldier.medals.order(:name).each do |m| %>
      <li><%= link_to m.name, m %></li>
    <% end %>
  </ul>
<% else %>
  <p><em>No medals recorded.</em></p>
<% end %>

<h3>Awards</h3>
<% if @soldier.awards.exists? %>
  <ul>
    <% @soldier.awards.order(:year, :id).each do |aw| %>
      <li>
        <strong><%= aw.name.presence || "(Unnamed award)" %></strong>
        <%= " (#{aw.year})"    if aw.year.present? %>
        <%= " — #{aw.country}" if aw.country.present? %>
        <%= " — #{aw.note}"    if aw.note.present? %>
      </li>
    <% end %>
  </ul>
<% else %>
  <p><em>No awards recorded.</em></p>
<% end %>

<%= render "shared/citations", citable: @soldier, heading: "Citations" %>

<h3>Cemetery</h3>
<p>
  <%= @soldier.cemetery ? link_to(@soldier.cemetery.name, @soldier.cemetery) : content_tag(:em, "Not recorded") %>
</p>
